{{set . "title" "Builds"}}
{{set . "showsidebar" "true"}}

{{template "header.html" .}}
<div id="page-wrapper">
  <div class="row padtop20 bottom10">
      <div class="col-lg-2">
          <label>Build Project</label>
      </div>
      <div class="col-lg-3">
          {{.build.Name}}
      </div>
      <div class="col-lg-2">
          <label>Tool</label>
      </div>
      <div class="col-lg-3">
          {{.build.ToolName}}
      </div>
  </div> <!-- .row -->
  <div class="row">
      <div class="col-lg-1">
          <label>{{msg . "description"}}</label>
      </div>
  </div> <!-- .row -->
  <div class="row bottom10">
      <div class="col-lg-8">
          {{.build.Description}}
      </div>
  </div> <!-- .row -->
  <div class="row">
      <div class="col-lg-3">
          <label>Build History</label>
      </div>
  </div>
  <div class="row left17">
        <table class="table table-striped table-bordered table-hover" id="datatable_ex">
          <thead>
            <tr>
              <th class="min">Status</th>
              <th>ID</th>
              <th>Build time</th>
              <th class="min">Artifacts</th>
            </tr>
          </thead>
          <tbody>
          {{range $index, $node := .builds}}
            <tr class="odd">
              <td>{{if eq $node.Status 0}}Fail{{else}}Pass{{end}}</td>
              <td>{{$.build.Name}} {{$node.DisplayName}}</td>
              <td>{{$node.BuildAt}}</td>
              <td><a href="{{$node.ArtifactsUrl}}">{{$node.ArtifactsName}}</a></td>
            </tr>
          {{end}}
          </tbody>
        </table>
  </div>
</div><!-- /#page-wrapper -->
</div><!-- /#wrapper -->

{{template "footer.html" .}}
{{if .builds}}
<script src="/public/bower_components/datatables/media/js/jquery.dataTables.min.js"></script>
<script src="/public/bower_components/datatables-plugins/integration/bootstrap/3/dataTables.bootstrap.min.js"></script>

<script>
$(document).ready(function(){
    $('#datatable_ex').DataTable({
    responsive:true,
    columnDefs: [ {
        "targets": 'no-sort',
        "orderable": false,
        },
        {
        "targets" : "min",
        "width" : "12%",
        }
        ]});
    });
</script>
{{end}}
